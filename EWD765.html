  <!DOCTYPE html>
  <html>
  <head>
    <title>A Hungarian problem</title>
    <link href="https://fonts.googleapis.com/css?family=Lobster|Raleway" rel="stylesheet">
    <link href="assets/common.css" rel="stylesheet">
    <link href="assets/transcriptions.css" rel="stylesheet">
    <link href="assets/tweet-selection.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.12.0.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/tweet-selection.js"></script>
    <meta name="generator" content="convertArticle.pl">
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@raboofje" />
    <meta name="twitter:description" content="From the Edsger Dijkstra EWD archive: A Hungarian problem" />
    <meta name="twitter:title" content="A Hungarian problem" />
    <meta name="twitter:image" content="http://raboof.github.io/ewd/assets/dijkstra.jpeg" />
  </head>
  <body>
  <div class="metabar">
    <div class="metabar-inner">
      <a href="index.html">HOME</a>
    </div>
  </div>
  <h1>A Hungarian problem</h1>
  <a class='original' href='https://www.cs.utexas.edu/~EWD/ewd76xx/EWD765.PDF'><img src='assets/original.png' alt='Show original manuscript'></a>
  <div class='body'>
<p class="noindent"><b>A Hungarian problem.</b></p>
<p>Martin Rem returned from his trip to Hungary with the following problem. Let two positive integers <var>p</var> and <var>q</var> be given. We start with a bag containing a finite number of integers. When the bag contains some number, <var>x</var> say, at least twice, a move is possible; the move consists of replacing in the bag two occurrences of <var>x</var> by <var>x</var>+<var>p</var> and <var>x</var>−<var>q</var> respectively. Show that this game terminates.</p>
<p>When we characterize the contents of the bag by its characteristic function <var>f</var> —i.e. for all <var>x</var>, <var>f</var> (<var>x</var>) = the number of occurrences of the value of <var>x</var> in the bag— and use the initializing guard —which is true when the equation can be solved and sets the unknown to a solution— the game can be written as follows</p>
<table cellpadding="0" cellspacing="0">
<tr>
<td colspan="2"><b>do</b> <var>x</var> : <var>f</var> (<var>x</var>) ≥ 2 →</td>
</tr>
<tr>
<td width="25">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td width="454" colspan="1"><var>f </var>(<var>x</var>−<var>q</var>), <var>f </var>(<var>x</var>), <var>f </var>(<var>x</var>+<var>p</var>) := <var>f </var>(<var>x</var>−<var>q</var>)+1, <var>f</var> (<var>x</var>)−2, <var>f </var>(<var>x</var>+<var>p</var>)+1</td>
</tr>
<tr>
<td colspan="2"><b>od</b></td>
</tr>
</table>
<p>To start with, we generalize the game: for each move a new pair (<var>p</var>, <var>q</var>) of positive numbers may be chosen. Furthermore we extend our program with auxiliary array <var>n</var>, initially satisfying for all <var>x</var> <var>&nbsp;&nbsp;f</var> (<var>x</var>) = <var>n</var>(<var>x</var>), and modified by extending the guarded command with the statement</p>
<table>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td colspan="1"><var>n</var>(<var>x</var>−<var>q</var>), <var>n</var>(<var>x</var>+<var>p</var>) := <var>n</var>(<var>x</var>−q) + 1, <var>n</var>(<var>x</var>+<var>p</var>) + 1</td>
</tr>
</table>
<p class="noindent">In other words, after initialization <var>n</var>(<var>x</var>) counts how many times <var>f</var> (<var>x</var>) is increased.</p>
<p>With <var>c</var> defined as <var>c</var> = (<b>N</b> <var>x</var> :: <var>n</var>(<var>x</var>) &gt; 0) we have</p>
<p class="noindent"><b>Lemma 0</b>.</p>
<p>Each <var>n</var>(<var>x</var>) is bounded <b>or</b> <var>c</var> is unbounded.</p>
<p class="noindent"><b>Proof</b>. Since each <var>f</var> (<var>x</var>) is bounded by the constant number of integers in the bag, an <var>f</var> (<var>x</var>) that is increased an unbounded number of times is also decreased an unbounded number of times, causing increases of <var>n</var>(<var>y</var>) for some <var>y</var> &gt; <var>x</var> (and some <var>y</var> &lt; <var>x</var>). Hence we have for all <var>x</var>:<br>
&nbsp; &nbsp;<var>n</var>(<var>x</var>) is bounded <b>or</b> (<b>S</b> <var>y</var> : <var>y </var>&gt;<var>x</var> : <var>n</var>(<var>y</var>)) is unbounded.<br>
Hence, for bounded <var>c</var> there is no largest <var>x</var> for which <var>n</var>(<var>x</var>) is unbounded, hence there is no such <var>x</var> at all. (End of proof of Lemma 0).</p>
<p>Since “<var>c</var> is bounded <b>and</b> each <var>n</var>(<var>x</var>) is bounded” is equivalent with “the game terminates”, and since P ∨ Q equals (¬Q ∧ P) ∨ Q, we derive from Lemma 0:</p>
<p class="noindent"><b>Lemma 1</b></p>
<p>The game terminates <b>or</b> <var>c</var> is unbounded.</p>
<p>The smallest value in the bag is the smallest value <var>x</var> such that <var>n</var>(<var>x</var>) &gt; 0 ; the largest value in the bag is the largest value <var>x</var> such that <var>n</var>(<var>x</var>) &gt; 0 . Hence, from Lemma 1 we conclude</p>
<p class="noindent"><b>Lemma 2.</b></p>
<p>The game terminates <b>or</b> the difference between largest and smallest value in the bag is unbounded.</p>
<p>With the derivation of Lemma 2, the auxiliary array <var>n</var> has done its work. Defining “a gap of length <var>h</var>” as a solution of the equation</p>
<p class="noindent"><var>f</var> (<var>x</var>) &gt; 0 <b>and</b> <var>f</var> (<var>x</var>+<var>h</var>) &gt; 0 <b>and</b> (<b>A</b> <var>j</var> : <var>x </var>&lt; <var>j</var> &lt; <var>x</var>+<var>h</var> : <var>f</var> (<var>j</var>)=0)</p>
<p class="noindent">we conclude from Lemma 2, because the number of integers in the bag is constant,</p>
<p class="noindent"><b>Lemma 3.</b></p>
<p>The game terminates <b>or</b> the length of the largest gap is unbounded.</p>
<p>Finally we undo some of our generalization: let the choice of the pair of positive numbers for each move be restricted to pairs (<var>p</var>, <var>q</var>) such that <var>p</var>+<var>q</var> ≤ <var>K</var> for some <var>K</var>. We then have</p>
<p class="noindent"><b>Lemma 4.</b></p>
<p>No gap exceeds the maximum of <var>K</var> and the length of the largest initial gap.</p>
<p>Combination of the last two lemmata solves the Hungarian problem.</p>
<p class="noindent"><b>Acknowledgement and concluding remark.</b></p>
<p>Thanks are due to the members of the Tuesday Afternoon Club with whom I discussed my first proof of Lemma 2. That proof used mathematical induction on the number of integers in the bag. I am particularly grateful to R.W. Bulterman for the persistence of his dislike of the three-case analysis in the induction step required; He also objected to some handwaving with which I draw a correct but sweeping conclusion from “A possible move remains possible until done”.</p>
<p>I must admit that I would have liked a simpler termination proof than the one I found this evening. Perhaps it doesn’t exist: Hungary is a traditional source of non-trivial problems.</p>
<p>Considering first the generalized problem was an improvement; relaxing constraints could be a general technique for doing away with reductiones ad absurdum.</p>
<p class="noindent"></p>
<table width="100%">
<tr>
<td valign="top" width="50%">Plantaanstraat 5</td>
<td>2 December 1980</td>
</tr>
<tr>
<td valign="top">5671 AL NUENEN</td>
<td>prof. dr. Edsger W. Dijkstra</td>
</tr>
<tr>
<td valign="top">The Netherlands</td>
<td>Burroughs Research Fellow</td>
</tr>
</table>
<hr>
<p class="noindent"><font size="-1">Transcribed by Martin P.M. van der Burgt<br>
Last revision <!-- #BeginDate format:En2 -->10-Nov-2015<!-- #EndDate -->
 .</font></p>
<p>&nbsp;</p>
</div>
  <script>
$('.body').tweetSelection({
  ellipsis: '...',
  quoteLeft: '\'',
  quoteRight: '\'',
  via: 'raboofje'
});
  </script>
  </body>
  </html>
