  <!DOCTYPE html>
  <html>
  <head>
    <title>Two starvation-free solutions of a general exclusion problem</title>
    <link href="https://fonts.googleapis.com/css?family=Lobster|Raleway" rel="stylesheet">
    <link href="assets/common.css" rel="stylesheet">
    <link href="assets/transcriptions.css" rel="stylesheet">
    <meta name="generator" content="convertArticle.pl">
  </head>
  <body>
  <div class="metabar">
    <div class="metabar-inner">
      <a href="index.html">HOME</a>
    </div>
  </div>
  <h1>Two starvation-free solutions of a general exclusion problem</h1>
  <div class='body'>				<p>In the canonical problem of the five dining philosophers, the philosophers, each of which alternatingly &ldquo;thinks&rdquo; and &ldquo;eats&rdquo;, are arranged cyclically, and no two neighbours may eat simultaneously. This constraint can be represented by placing the philosophers at the edges of a regular pentagon, each edge representing a pair-wise exclusion constraint between the two philosophers situated at its ends. This representation suggests a generalization:&nbsp;&nbsp;<var>N</var>&nbsp;&nbsp; philosophers, each placed at a vertex of an undirected graph of &nbsp;&nbsp;<var>N</var>&nbsp;&nbsp; vertices, and philosophers placed at directly connected vertices &nbsp;&nbsp;&#151;so-called &ldquo;neighbours&rdquo;&#151;&nbsp;&nbsp; being not allowed to eat simultaneously. In the sequel we shall give two starvation-free solutions.</p>				<p class="noindent"><u>First solution.</u></p>				<p>In this solution we associate with each edge a three-valued variable, represented by an undirected edge and two directions of an arrow along that edge. Initially all philosophers are thinking  and all edges are undirected. We use angle brackets to denote mutually exclusive actions. The life of a philosopher can then be described as a repetition of:</p>				<pre></pre>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td valign="top" width="10%"></td>						<td align="left" valign="top"><code>think;</code></td>					</tr>					<tr>						<td valign="top" width="10%"><code><var>L0</var>:</code></td>						<td align="left" valign="top"><code>&lt; direct outgoing arrows towards all your non-thinking neighbours &#151;i.e. all your neighbours that are hungry or eating&#151;, stop thinking and become hungry &gt;;<br>								wait until all your outgoing arrows have disappeared;</code></td>					</tr>					<tr>						<td valign="top" width="10%"><code><var>L1</var>:</code></td>						<td align="left" valign="top"><code>&lt; stop being hungry and start eating &gt;; <br>								eat;</code></td>					</tr>					<tr>						<td valign="top" width="10%"><code><var>L2</var>:</code></td>						<td align="left" valign="top"><code>&lt; remove all your incoming arrows, stop eating and start                thinking &gt;</code></td>					</tr>				</table>				<p>Because &nbsp;&nbsp;<var>L0</var>&nbsp;&nbsp; is the only arrow-creating action, each arrow is created by its source, and we conclude from this and the initial state</p>				<p class="noindent"><var>P1</var>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Only hungry philosophers have outgoing arrows.</p>				<p>Furthermore it follows from &nbsp;&nbsp;<var>L0</var>&nbsp;&nbsp; that being non-thinking is a necessary condition for receiving incoming arrows; on account of the initial state we can therefore conclude:</p>				<p class="noindent"><var>P2</var>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Only non-thinking philosophers have incoming arrows.</p>				<p class="noindent"><u>Corollary 1.</u> &nbsp;&nbsp;A thinking philosopher has no arrows.</p>				<p>But the inverse of Corollary 1 also holds:</p>				<p class="noindent"><var>P3</var>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A pair of non-thinking neighbours implies an arrow between them.</p>				<p class="noindent">Relation &nbsp;&nbsp;<var>P3</var>&nbsp;&nbsp; is left invariant by &nbsp;&nbsp;<var>L0</var>&nbsp;&nbsp; &#151;which creates an arrow between each pair of non-thinking neighbours it introduces&#151; , and is also left invariant by &nbsp;&nbsp;<var>L2</var>&nbsp;&nbsp; &#151;which destroys a pair of non-thinking neighbours for each arrow it removes&#151; .</p>				<p>From &nbsp;&nbsp;<var>P1</var>&nbsp;&nbsp; and &nbsp;&nbsp;<var>P3</var>&nbsp;&nbsp; we conclude that of each pair of non-thinking neighbours, at least one must be hungry. Hence, eating neighbours are excluded. (Argument Bulterman.)</p>				<p class="noindent"><var>P4</var>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;There is no cyclic path of arrows.<br />				</p>				<p class="noindent">Relation &nbsp;&nbsp;<var>P4</var>&nbsp;&nbsp; could only be violated by &nbsp;&nbsp;<var>L0</var>, because &nbsp;&nbsp;<var>L0</var>&nbsp;&nbsp; is the only arrow-creating action. But action &nbsp;&nbsp;<var>L0</var>&nbsp;&nbsp; can never close a cyclic path, because the source of the arrows it creates is initially thinking, and &nbsp;&nbsp;&#151;from Corollary 1&#151;&nbsp;&nbsp; hence has no incoming arrows.</p>				<p class="noindent"><u>Theorem</u>&nbsp;&nbsp; If &nbsp;&nbsp;<var>N</var>&nbsp;&nbsp; is finite, and each eating period for each philosopher is finite, for each philosopher each hungry period is finite.</p>				<p>This theorem expresses the absence of the danger of individual starvation (and, hence, the absence of the danger of deadlock).</p>				<p class="noindent"><u>Proof.</u>&nbsp;&nbsp; Because during a hungry period of philosopher &nbsp;&nbsp;<var>C</var>&nbsp;&nbsp; &#151;a period which ends when &nbsp;&nbsp;<var>C</var>&nbsp;&nbsp; has no outgoing arrows&#151;&nbsp;&nbsp; no <i>new</i> outgoing arrows for &nbsp;&nbsp;<var>C</var>&nbsp;&nbsp; are created, infinite hunger of &nbsp;&nbsp;<var>C</var>&nbsp;&nbsp; implies infinite existence of at least one outgoing arrow of &nbsp;&nbsp;<var>C</var>&nbsp;&nbsp;. Corollary 1 tells us that philosopher &nbsp;&nbsp;<var>D</var>&nbsp;&nbsp; at the target of that arrow is not thinking; &nbsp;&nbsp;<var>D</var>&nbsp;&nbsp; is not eating either, for then that arrow would disappear within a finite period of time. Hence, &nbsp;&nbsp;<var>D</var>&nbsp;&nbsp; is also infinitely long hungry. Repeating the argument we conclude the existence of an arrow from &nbsp;&nbsp;<var>D</var>&nbsp;&nbsp; to an infinitely long hungry <var>E</var>, etc., and, because the graph is finite, we conclude that infinite hunger of one philosopher implies that the arrows form at least one cyclic path, which contradicts &nbsp;&nbsp;<var>P4</var>&nbsp;&nbsp;. (End of proof.)</p>                        <p>The first solution has been recorded now &nbsp;&nbsp;&#151;I know it already much longer&#151; because, at last, I can show a correctness proof that fully satisfies me. Prior to the explicit formulation of &nbsp;&nbsp;<var>P3</var>&nbsp;&nbsp;, mutual exclusion used to be &ldquo;argued&rdquo; by means of an operational argument &nbsp;&nbsp;&#151;usually even with a reductio ad absurdum!&#151;&nbsp;&nbsp;; all that was very ugly, and Bulterman&#146;s argument does away with all that mess.</p>				<p>From a more abstract point of view, our first solution is perhaps not attractive: &nbsp;&nbsp; the implementation of the actions &nbsp;&nbsp;<var>L0</var>&nbsp;&nbsp; requires exactly the same form of mutual exclusion as the eating actions! &nbsp;&nbsp;No two neighbours may perform their action &nbsp;&nbsp;<var>L0</var>&nbsp;&nbsp; simultaneously. (This observation does not imply that under all circumstances, our first solution is useless. If &nbsp;&nbsp;<var>L0</var>&nbsp;&nbsp; is very short in time compared with the eating action, and we have a mechanism that ensures that over the <em>whole</em> network only one copy of a given action is active, we can use that mechanism for the implementation of the actions &nbsp;&nbsp;<var>L0</var>&nbsp;&nbsp;, while it may be too restrictive to use it directly for the eating actions.) Our second solution overcomes these objections.</p>				<p class="noindent"><u>Second solution.</u></p>				<p>Our second solution does not assume a central daemon that in one way or another ensures mutual exclusion on a global scale. We associate with each edge a binary semaphore <var>mutex</var>, and the program for a philosopher has now the following form &nbsp;&nbsp;&#151;initially all semaphores are = 1&#151;</p>				<pre>            think;            <var>P</var>(mutex<sub>i</sub>); &hellip; ; <var>P</var>(mutex<sub>j</sub>);            eat;            <var>V</var>(mutex<sub>i</sub>); &hellip; ; <var>V</var>(mutex<sub>j</sub>)</pre>            <p class="noindent">where the <var>P</var>- and <var>V</var>-operations are performed, one for each edge meeting in the philosopher&#146;s vertex. Starvation and deadlock are effectively prevented by a very simple &nbsp;&nbsp;&#151;although to my taste ugly&#151;&nbsp;&nbsp; trick: give an arbitrary numbering to the edges and deal in the sequence of <var>P</var>-operations with the semaphores in question in the order of increasing number.</p>            <p>The argument is simple. Assume that a philosopher is held up indefinitely; then there must exist a semaphore &nbsp;&nbsp;&#151;with number &nbsp;&nbsp;<var>p</var>&nbsp;&nbsp;, say&#151;&nbsp;&nbsp; that is = 0 indefinitely. This can only be, because one of its neighbours has decreased it by 1, but is held up indefinitely by another semaphore &nbsp;&nbsp;&#151;<var>q</var>&nbsp;&nbsp;, say&#151;&nbsp;&nbsp;. But because on account of our ordering convention we can assert that &nbsp;&nbsp;<var>q</var> &gt; <var>p</var>&nbsp;&nbsp;, repetition of the argument leads on a finite graph to an obvious contradiction.</p>            <p>The second solution is so ugly, because the ordering of the semaphores is so arbitrary. I can only accept it, provided the total time spent in the excluded actions is such a negligible fraction of real time that actual delay in a <var>P</var>-operation is, needed, extremely rare and always very short. The second solution could under circumstances perhaps be used to implement the actions &nbsp;&nbsp;<var>L0</var>&nbsp;&nbsp; of the first solution, which has the very nice property that neighbours are admitted to the dining table on the basis of the first-come-first-served.</p>			</div>			<p></p>			<table width="100%">			<tr>				<td width="249">Plataanstraat&nbsp;&nbsp;5</td>				<td align="right">prof. dr. Edsger W. Dijkstra</td>			</tr>			<tr>				<td width="249">5671&nbsp;&nbsp;AL&nbsp;&nbsp;NUENEN</td>				<td align="right">Burroughs Research Fellow</td>			</tr>			<tr>					<td width="249">The Netherlands</td>				</tr>			</table>			<hr />			<div id="footer">				<font size="-1">					transcribed by Swarup Sahoo<br /> last revised  <csobj format="MedDate" h="16" region="15" t="DateTime" w="80">Fri, 5 Aug 2011</csobj></font>			</div>		</div>	</body></html></div>
  </body>
  </html>
