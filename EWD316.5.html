  <!DOCTYPE html>
  <html>
  <head>
    <title>A Short Introduction to the Art of Programming (EWD 316), Chapter 5</title>
    <link href="https://fonts.googleapis.com/css?family=Lobster|Raleway" rel="stylesheet">
    <link href="assets/common.css" rel="stylesheet">
    <link href="assets/transcriptions.css" rel="stylesheet">
    <link href="assets/tweet-selection.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.12.0.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/tweet-selection.js"></script>
    <meta name="generator" content="convertArticle.pl">
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@raboofje" />
    <meta name="twitter:description" content="From the Edsger Dijkstra EWD archive: A Short Introduction to the Art of Programming (EWD 316), Chapter 5" />
    <meta name="twitter:title" content="A Short Introduction to the Art of Programming (EWD 316), Chapter 5" />
    <meta name="twitter:image" content="http://raboof.github.io/ewd/assets/dijkstra.jpeg" />
  </head>
  <body>
  <div class="metabar">
    <div class="metabar-inner">
      <a href="index.html">HOME</a>
    </div>
  </div>
  <h1>A Short Introduction to the Art of Programming (EWD 316), Chapter 5</h1>
  <div class='body'>				<div id="frame">					<div id="header">						<div align="center">							<p>EWD316: A Short Introduction to the Art of Programming</p>							<p>by</p>							<p>prof.dr.Edsger W.Dijkstra</p>							<p>August 1971</p>						</div>						<div align="left">							<p class="noindent"><a name="contents"></a><u>Contents</u></p>						</div>						<blockquote>							<div align="left">								<div id="frame">									<div id="header">										<blockquote>											<div align="left">												<div id="frame">													<div id="content">														<div align="left">															<p class="noindent">0. Contents</p>															<p class="noindent">1. <a title="Chapter 1 of EWD 316" href="EWD316.html">Preface</a><br>																<br>																2. <a title="Chapter 2 of EWD 316" href="EWD316.2.html">Some Fundamental Notions</a><br>																<br>																3. <a title="Chapter 3 of EWD 316" href="EWD316.3.html">Programming Languages and their Implementation</a><br>																<br>																4. <a title="Chapter 4 of EWD 316" href="EWD316.4.html">Variables and relations between their values</a><br>																<br>																5. Programs corresponding to recurrence relations<br>																<br>																6. <a title="Chapter 6 of EWD 316" href="EWD316.6.html">A first example of step-wise program composition</a><br>																<br>																7. <a title="Chapter 7 of EWD 316" href="EWD316.7.html">The shortest spanning subtree of a graph</a><br>																<br>																8. <a title="Chapter 8 of EWD 316" href="EWD316.8.html">The towers of Hanoi</a><br>																<br>																9. <a title="Chapter 9 of EWD 316" href="EWD316.9.html">The problem of eight queens</a><br>																<br>																10. <a title="Chapter 10 of EWD 316" href="EWD316.10.html">A rearranging routine</a></p>														</div>													</div>												</div>											</div>										</blockquote>									</div>								</div>							</div>						</blockquote>					</div>				</div>				<p class="noindent"><u>5. Programs corresponding to recurrence relations</u></p>				<p>Theorem 8 mentions successive states connected by a recurrence relation. The meaning of this theorem is twofold: it can be used to prove assertions about a given program, but also &#x2014;and this, I think, is more important&#x2014; it suggests to us, when faced with the task of making a program, the use of a while-clause in the case of a problem that in its mathematical formulation presents itself as the evaluation of a recurrence relation. We are going to illustrate this by a number of examples.</p>				<p>Consider the sequence of pairs <var>a<sub>i</sub></var>, <var>c<sub>i</sub></var> given by<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td valign="top">for <var>i</var> = 0</td>						<td valign="top"><var>a</var><sub>0</sub> = 1<br>							c<sub>0</sub> = 1 &#150; <var>b</var>, with 0 &lt; <var>b</var> &lt; 2 (i.e. abs(c<sub>0</sub>) &lt; 1)<br>							<br>						</td>						<td align="right" valign="top">							<div align="right">								(1)</div>						</td>					</tr>					<tr>						<td valign="top">for <var>i</var> &gt; 0</td>						<td valign="top"><var>a<sub>i</sub></var> = (1 + <var>c<sub>i</sub></var><sub>-1</sub>) * <var>a<sub>i</sub></var><sub>-1</sub><br>							<var>c<sub>i</sub></var> = (<var>c<sub>i</sub></var><sub>-1</sub>)<sup>2</sup>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<sup><br>								<br>							</sup></td>						<td align="right" valign="top">(2)</td>					</tr>					<tr>						<td valign="top">Then</td>						<td valign="top">lim <var>a<sub>i</sub></var> = 1/<var>b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</var><br>							<var>i</var> &#x2192;&#x221e;</td>						<td align="right" valign="top"></td>					</tr>				</table>				<p class="noindent"></p>				<p class="noindent"><u>Exercise</u>. Prove the last formula. (This has nothing to do with programming, it is secondary school algebra. The clue of a proof can be found in the relation</p>				<blockquote>					<table border="0" cellspacing="2" cellpadding="0">						<tr>							<td align="center">1</td>							<td align="center"></td>							<td align="center">1 + <var>c<sub>i</sub></var><sub>-1</sub></td>							<td align="center"></td>						</tr>						<tr height="10">							<td align="center" height="10">-------</td>							<td align="center" height="10">&nbsp;&nbsp;=&nbsp;&nbsp;</td>							<td align="center" height="10">-------</td>							<td align="center" height="10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.)</td>						</tr>						<tr>							<td align="center">1 &#150; <var>c<sub>i</sub></var><sub>-1</sub></td>							<td align="center"></td>							<td align="center">1 - <var>c<sub>i</sub></var></td>							<td align="center"></td>						</tr>					</table>				</blockquote>				<p>It is requested to use this recurrence relation to approximate the value of 1/<var>b</var>; obviously we cannot compute infinitely many elements of the sequence <var>a</var><sub>0</sub>, <var>a</var><sub>1</sub>, <var>a</var><sub>2</sub>, &#133; but we can accept <var>a<sub>k</sub></var> as a sufficiently close (how close?) approximation of 1/<var>b</var> when <var>c<sub>k</sub></var> is less (in absolute value) than a given, small, positive tolerance named &quot;<var>eps</var>&quot;. (This example is of historical interest; it has been taken from the subroutine library for EDSAC 1, the world's first stored program controlled automatic computer. The order code of this computer did not comprise a divide instruction and one of the methods used with this computer to compute quotients was based on the above recurrence relation.)</p>				<p>Theorem 8 talks about &quot;a part, <var>s</var>, of the state space&quot; and the loop</p>				<blockquote>					<p class="noindent"><u>while</u> <var>B</var>(<var>s</var>) <u>do</u> <var>s </var>:= <var>S</var>(<var>s</var>)</p>				</blockquote>				<p class="noindent">asserts that after the initial state <var>s</var><sub>0</sub> , the states <var>s<sub>i</sub></var> after the <var>i</var>-th execution of the repeatable statement will satisfy<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td width="6%"></td>						<td><var>s<sub>i</sub></var> = <var>S</var>(<var>s<sub>i</sub></var><sub>-1</sub>)</td>						<td>							<div align="right">								(3)</div>						</td>					</tr>				</table>				<p>Our recurrence relations (2) are exactly of the form (3) if we identify the state <var>s<sub>i</sub></var> with the value pair <var>a<sub>i</sub></var>, <var>c<sub>i</sub></var>. That is, to span the part <var>s</var> of the state space we have to introduce two variables, for the purpose of this discussion called <var>A</var> and <var>C</var>, and we shall denote their values after the <var>i-</var>th execution of the repeatable statement <var>A<sub>i</sub></var> and <var>C<sub>i</sub></var> respectively. We associate the state <var>s<sub>i</sub></var> (as given by the values <var>A<sub>i</sub></var> and <var>C<sub>i </sub></var>) with the value pair <var>a<sub>i</sub></var>, <var>c<sub>i</sub></var> by the relations<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td width="5%"></td>						<td><var>A<sub>i</sub></var> = <var>a<sub>i</sub></var><br>							<var>C<sub>i</sub></var> = <var>c<sub>i</sub></var></td>						<td>							<div align="right">								(4)</div>						</td>					</tr>				</table>				<p>(Remember: on the left-hand sides the subscript &quot;<var>i</var>&quot; means &quot;the value of the variable after the <var>i</var>-th execution of the repeatable statement&quot;, on the right-hand side the subscript &quot;<var>i</var>&quot; refers to the recurrent sequences as given by (1) and (2). It would have been usual to call the two variables &quot;<var>a</var>&quot; and &quot;<var>c</var>&quot; instead of &quot;<var>A</var>&quot; and &quot;<var>C</var>&quot;, i.e. not to distinguish between the quantities defined in the mathematical formulation on the one hand and the associated variables in the program on the other hand. As this association is the very subject of this discussion, it would have been fatal not to distinguish between them.)</p>				<p>Within the scope of a declaration &quot;<u>real</u> <var>A</var>, <var>C</var>&quot; it is now a straightforward task to write the piece of program:</p>				<blockquote>					<p class="noindent"><var>A </var>:= 1; <var>C </var>:= 1 &#150; <var>b</var>;<br>						<u>while</u> abs(<var>C </var>) &#x2265; <var>eps</var> <u>do</u><br>						<u>begin</u> <var>A </var>:= (1 + <var>C </var>) * <var>A</var>;<br>						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<var>C </var>:= <var>C</var> * <var>C</var><br>						<u>end</u>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</p>				</blockquote>				<p>The first line has to create the proper state <var>s</var><sub>0</sub> and does so in accordance with (4) and (1), the repeatable statement has the form, symbolically denoted by &quot;<var>s </var>:= <var>S</var>(<var>s</var>)&quot; &#x2014;see the Note below&#x2014; in accordance with (4) and (2), and the condition guarantees that after termination</p>				<blockquote>					<p class="noindent">(<var>A<sub>k</sub></var> = ) <var>A</var> = <var>a<sub>k</sub></var></p>				</blockquote>				<p class="noindent">will hold with the proper value of <var>k</var>.</p>				<p class="noindent"><u>Exercise</u>. Prove that the loop terminates.</p>				<p class="noindent"><u>Note</u>. The symbolic assignment &quot;<var>s </var>:= <var>S</var>(<var>s</var>)&quot; has the form of two assignments</p>				<blockquote>					<p class="noindent">A := (1 + <var>C </var>) * <var>A</var>;<br>						<var>C </var>:= <var>C</var> * <var>C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</var></p>				</blockquote>				<p class="noindent">With the initial condition <var>A</var> = <var>a<sub>i</sub></var><sub>-1</sub> , <var>C</var> = <var>c<sub>i</sub></var><sub>-1</sub> the first assignment is equivalent to</p>				<blockquote>					<p class="noindent"><var>A</var> := (1 + <var>c<sub>i</sub></var><sub>-1</sub>) * <var>a<sub>i</sub></var><sub>-1</sub></p>				</blockquote>				<p class="noindent">and after the first, but before the second assignment we have &#x2014;on account of (2)&#x2014;</p>				<blockquote>					<p class="noindent"><var>A</var> = <var>a<sub>i</sub></var>, <var>C</var> = <var>c</var><sub><var>i</var>-1</sub><var>&nbsp;&nbsp;&nbsp;&nbsp;.</var></p>				</blockquote>				<p class="noindent">We have the complete pair <var>A</var> = <var>a<sub>i</sub></var>, <var>C</var> = <var>c<sub>i</sub></var> only after the second assignment. Thanks to the explicit occurrence of the subscripts, the order of the two relations comprising (2) is immaterial, this in contrast to the two assignment statements composing the repeatable statement, whose order is vital.</p>				<p class="noindent"><u>Exercise</u>. In the same EDSAC 1 subroutine library the next scheme is used. Consider the sequence of pairs <var>a<sub>i</sub></var>, <var>c<sub>i</sub></var>, given by<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td valign="top">for <var>i</var> = 0</td>						<td valign="top"><var>a</var><sub>0</sub> = <var>b</var><br>							c<sub>0</sub> = 1 &#150; <var>b</var>, with 0 &lt; <var>b</var> &lt; 2 (i.e. abs(c<sub>0</sub>) &lt; 1)<br>							<br>						</td>						<td align="right" valign="top">							<div align="right"></div>						</td>					</tr>					<tr>						<td valign="top">for <var>i</var> &gt; 0</td>						<td valign="top"><var>a<sub>i</sub></var> = (1 + .5 * <var>c<sub>i</sub></var><sub>-1</sub>) * <var>a<sub>i</sub></var><sub>-1</sub><br>							<var>c<sub>i</sub></var> = (<var>c<sub>i</sub></var><sub>-1</sub>)<sup>2 </sup>* (.75 + .25 * <var>c<sub>i</sub></var><sub>-1</sub>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br>							<br>						</td>						<td align="right" valign="top"></td>					</tr>					<tr>						<td valign="top">Then</td>						<td valign="top">lim <var>a<sub>i</sub></var> = <var>b<sup>.5</sup></var>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br>							<var>i</var>&#x2192;&#x221e;</td>						<td align="right" valign="top"></td>					</tr>				</table>				<p class="noindent">Prove the last formula and make a program using it for the approximation of the square root. The clue of a proof can be found in the relation</p>				<blockquote>					<p class="noindent">(1 &#150; <var>c<sub>i</sub></var><sub>-1</sub>)<sup>-.5</sup> = (1 + .5 * <var>c<sub>i</sub></var><sub>-1</sub>) * (1 - <var>c<sub>i</sub></var>)<sup>-.5</sup>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</p>				</blockquote>				<p class="noindent">Prove also the termination of the repetition in the program made.</p>				<p class="noindent"><u>Exercise</u>. In the same EDSAC 1 subroutine library the next scheme is used. Consider the sequence of triples <var>inc</var><sub><var>i</var></sub>, <var>s</var><sub><var>i</var></sub>, <var>x</var><sub><var>i</var></sub>, given by<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td valign="top" width="30%">for <var>i</var> = 0</td>						<td><var>inc</var><sub>0</sub> = log 2<br>							<var>s</var><sub>0</sub> = 0<br>							x<sub>0</sub> = <var>arg</var>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(with 1 &#x2264; <var>arg</var> &lt; 2)</td>					</tr>					<tr>						<td valign="top" width="30%">for <var>i</var> &gt; 0</td>						<td></td>					</tr>					<tr>						<td valign="top" width="30%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (<var>x<sub>i</sub></var><sub>-1</sub>)<sup>2</sup> &lt; 2</td>						<td><var>inc<sub>i</sub></var> = .5 * <var>inc<sub>i</sub></var><sub>-1</sub><br>							<var>s<sub>i</sub></var> = <var>s<sub>i</sub></var><sub>-1</sub><br>							<var>x<sub>i</sub></var> = (<var>x<sub>i</sub></var><sub>-1</sub>)<sup>2</sup>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<sup><br>								<br>							</sup></td>					</tr>					<tr>						<td valign="top" width="30%"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (<var>x<sub>i</sub></var><sub>-1</sub>)<sup>2</sup> &#x2265; 2</td>						<td><var>inc<sub>i</sub></var> = .5 * <var>inc<sub>i</sub></var><sub>-1</sub><br>							<var>s<sub>i</sub></var> = <var>s<sub>i</sub></var><sub>-1</sub> + .5 * <var>inc<sub>i</sub></var><sub>-1</sub><br>							<var>x<sub>i</sub></var> = .5 * (<var>x<sub>i</sub></var><sub>-1</sub>)<sup>2<br>								<br>							</sup></td>					</tr>					<tr>						<td valign="top" width="30%">Then</td>						<td> lim <var>s<sub>i</sub></var> = log(<var>arg</var>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br>							<var>i</var>&#x2192;&#x221e;</td>					</tr>				</table>				<p class="noindent">Prove this relation and make a program using it to approximate the logarithm of a value <var>arg</var> in the interval stated. (In this program &quot;log 2&quot; may be regarded as a known constant which, in fact, determines the base of the logarithm.) The clue of the proof can be found in the relation</p>				<blockquote>					<p class="noindent">log(<var>arg</var>) = <var>s<sub>i</sub></var> + <var>inc<sub>i </sub></var> * log(<var>x<sub>i</sub></var> ) / log 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</p>				</blockquote>				<p>Our next example is very simple; it is so traditional that we could call it standard. (No self-respecting programming course omits it, it is often the very first example of a loop; Peter Naur uses it in his article &quot;Proof of algorithms by general snapshots&quot;, 1966, <i>BIT</i>,<i> 6</i>, pp 310-316.)</p>				<p>Given a sequence of values</p>				<blockquote>					<p class="noindent"><var>a</var>[1], <var>a</var>[2], <var>a</var>[3], &#133; , <var>a</var>[<var>N</var>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (with <var>N</var> &#x2265; 1)</p>				</blockquote>				<p class="noindent">and a variable called &quot;<var>max</var>.&quot; Make a piece of program assigning to the variable named &quot;<var>max</var>&quot; the maximum value occurring in the sequence. (As <var>N</var> &#x2265; 1, the sequence is not empty and therefore the task makes sense; it is not required that any two values in the sequence differ from each other, the maximum value sought may occur more than once in the sequence.) If he welcomes the experience the reader is invited to try to make this piece of program himself before reading on.</p>				<p>How do we define the maximum value occurring in a sequence of length <var>N</var> for general <var>N</var> &#x2265; 1? If we call &quot;<var>maximum<sub>k</sub></var>&quot; the maximum value occurring among the first <var>k</var> elements <var>a</var>[1], &#133; , <var>a</var>[<var>k</var>], then</p>				<p class="noindent">1) the answer sought is <var>maximum<sub>N</sub></var></p>				<p class="noindent">2) the values <var>maximum<sub>k</sub></var> are given<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td valign="top" width="14%">for <var>k</var> = 1</td>						<td valign="top">by the base: <var>maximum</var><sub>1</sub> = <var>a</var>[1]<br>							appealing to the knowledge that the maximum element in a sequence of length 1 must be the only element in the sequence<br>							<br>						</td>						<td align="right" valign="top"> (5)</td>					</tr>					<tr>						<td valign="top" width="14%">for <var>k</var> &gt; 1</td>						<td valign="top">by the recurrence relation: 							<div align="left">								<p><var>maximum<sub>k</sub></var> = MAX(<var>maximum</var><sub><var>k</var>-1</sub>, <var>a</var>[<var>k</var>])</p>								<p class="noindent">assuming the knowledge of the function MAX of two arguments.</p>							</div>						</td>						<td align="right" valign="top">(6)</td>					</tr>				</table>				<p class="noindent">The recurrence relation (6) presents us with an additional difficulty because it is <em>not</em> of the form</p>				<blockquote>					<p class="noindent"><var>s<sub>i</sub></var> = <var>S</var>(<var>s</var><sub><var>i</var>-1</sub>)</p>				</blockquote>				<p class="noindent">because &#x2014;via &quot;<var>a</var>[<var>k</var>]&quot;&#x2014; the value <var>k</var> occurs on the right-hand side not exclusively in the subscript &quot;<var>k</var>-1&quot;. To overcome this we use a trick that might be called a method. If we call <var>n<sub>k</sub></var> the <var>k-</var>th natural number, then <span lang=EN-GB><var>n<sub>k&nbsp;</sub></var>=&nbsp;k; the numbers <var>n<sub>k</sub></var> satisfy the obvious recurrence relation</span> <var>n<sub>k&nbsp;</sub></var>=&nbsp;1&nbsp;+&nbsp;<var>n<sub>k</sub></var><sub>&#x2212;1</sub>. We can now rewrite the definition for the sequence of values <var>maximum<sub>k</sub></var> in the form of a definition for the pairs <var>n<sub>k</sub></var>, <var>maximum<sub>k</sub></var>:<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td valign="top" width="14%">for <var>k</var> = 1</td>						<td valign="top"><var>n</var><sub>1</sub> = 1<br>							<var>maximum</var><sub>1</sub> = <var>a</var>[1]<br>							<br>						</td>						<td align="right" valign="top">(7)</td>					</tr>					<tr>						<td valign="top" width="14%">for <var>k</var> &gt; 1</td>						<td valign="top"><var>n<sub>k</sub></var> = 1 + <var>n<sub>k</sub></var><sub>-1</sub><br>							<var>maximum<sub>k</sub></var> = MAX(<var>maximum<sub>k</sub></var><sub>-1</sub>, <var>a</var>[1 + <var>n<sub>k</sub></var> <sub>-1</sub>])</td>						<td align="right" valign="top">(8)</td>					</tr>				</table>				<p class="noindent">and now the recurrence relations are of the form <var>s<sub>i</sub></var> = <var>S</var>(<var>s</var><sub><var>i</var>-1</sub>), the only &#x2014;trivial&#x2014; difference being that in Theorem 8 we started with <var>i</var> = 0 and here with <var>k&nbsp;</var>=&nbsp;1. The trick we called a method shows that we need a second (integer) variable; call it &quot;<var>m</var>&quot;. Our state <var>s<sub>i</sub></var> will associate (with <var>k</var>&nbsp;=&nbsp;<var>i</var>&nbsp;+&nbsp;1)</p>				<blockquote>					<p class="noindent"><var>max<sub>i</sub></var> = <var>maximum<sub>k</sub></var><br>						<var>m<sub>i</sub></var> = <var>n<sub>k&nbsp;</sub>&nbsp;&nbsp;&nbsp;&nbsp;.</var></p>				</blockquote>				<p>The piece of program now becomes:</p>				<blockquote>					<p class="noindent"><var>max </var>:= <var>a</var>[1]; <var>m </var>:= 1;<br>						<u>while</u> <var>m</var> &lt; <var>N</var> <u>do</u> <u>begin</u> <var>m </var>:= <var>m</var> + 1;<br>						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<var>max </var>:= MAX(<var>max</var>, <var>a</var>[<var>m</var>])<br>						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<u>end</u>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</p>				</blockquote>				<p class="noindent">Again, the order of the two assignment statements is essential.</p>				<p>We have given the above piece of reasoning and the explicit references to the recurrence relation of Theorem 8 because it shows a mechanism leading to the conclusion that the part of the state space on which the repetition operates needs to comprise an additional variable. Even a moderately trained programmer draws this conclusion &quot;intuitively&quot; and from now onwards I shall assume my reader equipped with that intuition. Then &#x2014;and only then&#x2014; there is a much shorter path of reasoning that leads to the program we found. It does not consider &#x2014;&quot;statically&quot; so to speak&#x2014; the sequence of values <var>s</var><sub>0</sub>, <var>s</var><sub>1</sub>, &#133; in the sense that it bothers about the values of the subscript <var>i</var> in <var>s<sub>i</sub></var>. It appeals directly to Theorems 5 and 6 and works in terms of assertions valid (before and after) any execution of the repeatable statement. The price paid for this is the duty to prove termination separately.</p>				<p>Given the base<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td width="20%">k = 1</td>						<td><var>maximum</var><sub>1</sub> = <var>a</var>[1]</td>					</tr>				</table>				<p class="noindent"> and the step<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td width="20%">1 &lt; <var>k</var> &#x2264; <var>N</var></td>						<td><var>maximum<sub>k</sub></var> = MAX(<var>maximum<sub>k</sub></var> <sub>-1</sub>, <var>a</var>[<var>k</var>])</td>					</tr>				</table>				<p class="noindent">the programmer &quot;intuitively&quot; introduces two variables which he calls &quot;<var>maximum</var>&quot; and &quot;<var>k</var>&quot; for short and the relation to be kept invariant is<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td width="20%"><i>P</i> :</td>						<td>1 &#x2264; <var>k</var> &#x2264; <var>N</var> &nbsp;&nbsp;<u>and</u> &nbsp;&nbsp;<var>maximum</var> = <var>maximum<sub>k</sub></var>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</td>					</tr>				</table>				<p class="noindent"> (Here the use of &quot;<var>maximum</var>&quot; and &quot;<var>k</var>&quot; stands for the current value of the variable thus named, while &quot;<var>maximum<sub>k</sub></var>&quot; stands for the value as given by the recurrence relation. This double use of the same names is tricky but programmers do it. I too.)</p>				<p class="noindent">The program then consists of two parts: establishing the relation <var>P</var> in accordance with the base and repeatedly increasing <var>k</var> under invariance of relation <var>P</var>, i.e. in accordance with the step.</p>				<p class="noindent">The initialization</p>				<blockquote>					<p class="noindent">&quot;<var>maximum</var> := <var>a</var>[1]; <var>k </var>:= 1&quot;</p>				</blockquote>				<p class="noindent">establishes <var>P</var> (with <var>k</var> = 1), the repetition</p>				<blockquote>					<p class="noindent"><u>while</u> <var>k</var> &lt; <var>N</var> <u>do</u><br>						<u>begin</u> <var>k </var>:= <var>k</var> + 1;<br>						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<var>maximum </var>:= MAX(<var>maximum</var>, <var>a</var>[<var>k</var>])<br>						<u>end</u></p>				</blockquote>				<p class="noindent">causes the repeatable statement to be executed under the combined relation &quot;<var>B</var> <u>and</u> <var>P </var>&quot;, i.e.</p>				<blockquote>					<p class="noindent"><var>k</var> &lt; <var>N</var> &nbsp;&nbsp;<u>and</u> &nbsp;&nbsp;1 &#x2264; <var>k</var> &#x2264; <var>N</var> &nbsp;&nbsp;<u>and</u> &nbsp;&nbsp;<var>maximum</var> = <var>maximum<sub>k</sub></var></p>				</blockquote>				<p class="noindent">which reduces to<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td width="8%"></td>						<td>1 &#x2264; <var>k</var> &lt; <var>N</var> &nbsp;&nbsp;<u>and</u> &nbsp;&nbsp;<var>maximum</var> = <var>maximum<sub>k</sub></var>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</td>						<td>							<div align="right">								(9)</div>						</td>					</tr>				</table>				<p>In order to show that the execution of the repeatable statement under the initial condition (9) leaves relation <var>P</var> valid, it is desirable to distinguish between the values before and after its execution; now it would be confusing to do so with subscripts (why?), therefore we distinguish the values after execution by primes.</p>				<p>Initially we have relation (9); after the assignment <var>k</var> := <var>k</var> + 1 we have the relation <var>k'</var> = <var>k</var> + 1 and from the first part of (9), i.e. 1 &#x2264; <var>k</var> &#x2264; <var>N</var>, follows 2&nbsp;&#x2264;&nbsp;<var>k'</var>&nbsp;&#x2264;&nbsp;<var>N</var>, which implies<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td width="8%"></td>						<td>1 &#x2264; <var>k'</var> &#x2264; <var>N&nbsp;</var>&nbsp;&nbsp;&nbsp;&nbsp;.</td>						<td>							<div align="right">								(10)</div>						</td>					</tr>				</table>				<p class="noindent">The second assignment now becomes effectively <var>maximum </var>:= MAX(<var>maximum<sub>k</sub></var>, <var>a</var>[<var>k'</var>]), resulting in the relation<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td width="8%"></td>						<td><var>maximum'</var> = <var>maximum<sub>k'&nbsp;</sub>&nbsp;&nbsp;&nbsp;&nbsp;.</var></td>						<td>							<div align="right">								(11)</div>						</td>					</tr>				</table>				<p class="noindent">Relations (10) and (11) combine to a replica of <var>P</var>, but now for the primed quantities.</p>				<p>Termination follows from the fact that each execution of the repeatable statement involves an effective increase of the integer valued variable <var>k</var>. After termination we have, according to Theorem 5, &quot;<var>P</var> <u>and</u> <u>non</u> <var>B </var>&quot;, i.e.</p>				<blockquote>					<p class="noindent">1 &#x2264; <var>k</var> &#x2264; <var>N</var> &nbsp;&nbsp;<u>and</u> &nbsp;&nbsp;<var>maximum</var> = <var>maximum<sub>k &nbsp;&nbsp; </sub></var><u>and</u> &nbsp;&nbsp;<u>non</u> <var>k</var> &lt; <var>N </var>;</p>				</blockquote>				<p class="noindent">from the first and the last term we conclude <var>k</var> = <var>N</var> and then from the middle part</p>				<blockquote>					<p class="noindent"><var>maximum</var> = <var>maximum<sub>N</sub></var></p>				</blockquote>				<p class="noindent">which concludes the proof.</p>				<p class="noindent"><u>Exercise</u>. Make a program effectively assigning &quot;<var>prod</var> := <var>X</var> * <var>Y</var>&quot; with integer <var>X</var> and <var>Y</var>, satisfying <var>X</var> &#x2265; 0, <var>Y</var> &#x2265; 0<br>					a) using only addition and subtraction<br>					b) using in addition the boolean function &quot;odd(<var>x</var>)&quot;, doubling and halving of a number. (The so-called Egyptian multiplication.)</p>				<p class="noindent"><u>Exercise</u>. Make a program effectively assigning &quot;<var>rem </var>:=REM(<var>X</var>, <var>Y</var>)&quot; with integer <var>X</var> and <var>Y</var>, X &#x2265; 0, Y &gt; 0, where the function REM(<var>X</var>, <var>Y</var>) is the remainder after the division of <var>X</var> by <var>Y</var><br>					a) using only addition and subtraction<br>					b) using in addition doubling and halving of a number. Modify both programs in such a way that in addition &quot;<var>quot </var>:=QUOT(<var>X</var>, <var>Y</var>)&quot; will take place. (The so-called Chinese division.)</p>				<p>We conclude this section by an example of the (standard) circumstance in which a recurrence relation should not be translated blindly into a loop. Given two sequences of values</p>				<blockquote>					<p class="noindent"><var>x</var>[1], <var>x</var>[2], &#133; , <var>x</var>[<var>N</var>] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and<br>						<var>y</var>[1], <var>y</var>[2], &#133; , <var>y</var>[<var>N</var>] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with <var>N</var> &#x2265; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</p>				</blockquote>				<p class="noindent">make a program assigning to the boolean variable named &quot;<var>eq</var>&quot; the value <u>true</u> if <var>x</var>[<var>i</var>]&nbsp;=&nbsp;<var>y</var>[<var>i</var>] for&nbsp;all <var>i</var> satisfying 1 &#x2264; <var>i</var> &#x2264; <var>N</var> and the value <u>false</u> if in that range a value for <var>i</var> exists such that <var>x</var>[<var>i</var>]&nbsp;&#x2260;&nbsp;<var>y</var>[<var>i</var>]. (The sequence may be empty, in that case &quot;<var>eq</var>&quot; should get the value <u>true</u>.)</p>				<p>How do we define equality for sequences of length <var>N</var> for general <var>N</var>? Again by means of a recurrence relation. Let <var>eq<sub>i</sub></var> mean &quot;no difference occurs among the first <var>i</var> pairs&quot;; the sequence of values  <var>eq<sub>i</sub></var> is given by<br>					<br>				</p>				<table width="100%" border="0" cellspacing="2" cellpadding="0">					<tr>						<td>for <var>i</var> = 0</td>						<td><var>eq</var><sub>0</sub> = <u>true</u></td>					</tr>					<tr>						<td>for <var>i</var> &gt; 0</td>						<td><var>eq<sub>i</sub></var> = <var>eq</var><sub><var>i</var>-1</sub> <u>and</u> <var>x</var>[<var>i</var>] = <var>y</var>[<var>i</var>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</td>					</tr>				</table>				<p>The net effect of the program to be made should be <var>eq</var> := <var>eq<sub>N</sub></var>.</p>				<p>A blind translation into initialization followed by repetition would lead to</p>				<blockquote>					<p class="noindent"><var>eq</var> := <u>true</u>; <var>i </var>:= 0;<br>						<u>while</u> <var>i</var> &lt; <var>N</var> <u>do</u> <u>begin</u> <var>i </var>:= <var>i</var> + 1; <var>eq </var>:= (<var>eq</var> <u>and</u> <var>x</var>[<var>i</var>] = <var>y</var>[<var>i</var>]) <u>end</u></p>				</blockquote>				<p>Although the above program is correct, the following program, besides being equally correct, is on the average more efficient:</p>				<blockquote>					<p class="noindent"><var>eq </var>:= <u>true</u>; <var>i </var>:= 0;<br>						<u>while</u> <var>i</var> &lt; <var>N</var> <u>and</u> <var>eq</var> <u>do</u> <var>begin</var> <var>i </var>:= <var>i</var> + 1; <var>eq </var>:= (<var>x</var>[<var>i</var>] = <var>y</var>[<var>i</var>]) <u>end</u>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</p>				</blockquote>				<p class="noindent">because it terminates the repetition as soon as a difference has been found.</p>				<p class="noindent"><u>Exercise</u>. Prove the correctness of the second program.<br>				</p>				<p class="noindent"><a href="#contents">Back to top</a></p>				<p class="noindent">Next chapter: 6. <a title="Chapter 6 of EWD 316" href="EWD316.6.html">A first example of step-wise program composition</a></p>				<p></p>			</div>			<hr />			<!-- name and date -->      <div id="footer">transcribed by Max Kohler<br /> revised <csobj format="MedDate" h="15" region="15" t="DateTime" w="95">Sat, 2 Aug 2008</csobj></div>    </div>  </body></html></x-html></div>
  <script>
$('body').tweetSelection({
  height: 300,
  width: 600,
  minimumTextSelected: 3,
  shareClass: '.tweet-selection',
  ellipsis: '...',
  quoteLeft: '"',
  quoteRight: '"',
  via: 'raboofje'
});
  </script>
  </body>
  </html>
