  <!DOCTYPE html>
  <html>
  <head>
    <title>Erratum and embellishments of</title>
    <link href="https://fonts.googleapis.com/css?family=Lobster|Raleway" rel="stylesheet">
    <link href="assets/common.css" rel="stylesheet">
    <link href="assets/transcriptions.css" rel="stylesheet">
    <link href="assets/tweet-selection.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.12.0.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/tweet-selection.js"></script>
    <meta name="generator" content="convertArticle.pl">
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@raboofje" />
    <meta name="twitter:description" content="From the Edsger Dijkstra EWD archive: Erratum and embellishments of" />
    <meta name="twitter:title" content="Erratum and embellishments of" />
    <meta name="twitter:image" content="http://raboof.github.io/ewd/assets/dijkstra.jpeg" />
  </head>
  <body>
  <div class="metabar">
    <div class="metabar-inner">
      <a href="index.html">HOME</a>
    </div>
  </div>
  <h1>Erratum and embellishments of</h1>
  <div class='body'>
<div id="frame">
<div id="header"><a title="Link to the PDF version of EWD504" href="https://www.cs.utexas.edu/~EWD/ewd05xx/EWD504.PDF">EWD504</a></div>
<div id="content">
<p style="text-indent: 0"><font size="5"><b>Copyright Notice</b></font></p>
<p style="text-indent: 0">The following manuscript</p>
<p>EWD 504: Erratum and embellishments of EWD503</p>
<p style="text-indent: 0">is held in copyright by Springer-Verlag New York.</p>
<p style="text-indent: 0">The manuscript was published as pages 145-146 of</p>
<p style="text-indent: 0; margin-left: 36">Edsger W. Dijkstra, <i>Selected Writings on Computing: A Personal Perspective</i>,<br />
Springer-Verlag, 1982. ISBN 0-387-90652-5.</p>
<p style="text-indent: 0"><b>Reproduced with permission from Springer-Verlag New York.<br />
Any further reproduction is strictly prohibited.</b></p>
<p style="text-indent: 0"></p>
<hr />
<p style="text-indent: 0">12th July 1975</p>
<p><u>Erratum and embellishments of EWD503.</u></p>
<p>Erratum: the text of the procedure "release" on page EWD503 - 2 should begin as follows.</p>
<blockquote>
<pre>
<code><u>proc</u> release:
     <u>if</u> busy → busy:= false;
               upsweep:= (upsweep, qu1); downsweep:= (downsweep, qu2);
               <u>if</u> ...etc
</code>
</pre></blockquote>
<p>To keep the interpunction consistent, I should have used a colon in line 6:</p>
<blockquote>
<pre>
<code><u>proc</u> request(dest: cylinder):
</code>
</pre></blockquote>
</div>
<div id="content" align="center">
<p class="noindent">*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br />
&nbsp;*</p>
</div>
<div id="content">
<p>First embellishment: the text of the procedure "endwrite" on page EWD503 - 1 is no longer "quite nice", since I discovered the alternative:</p>
<blockquote>
<pre>
<code><u>proc</u> endwrite:
     <u>if</u> aw = 1 → aw:= 0; writers:= (head(readers), writers);
                 me:= head(writers)
     <u>fi</u>
<u>corp</u> endwrite;</code>
</pre></blockquote>
<p>When there are both readers and writers waiting, it avoids the final unnecessary activation of the oldest writer. Clearly, "shunting" is something I still have to learn!</p>
</div>
<div id="content" align="center">
<p class="center">*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br />
&nbsp;*</p>
</div>
<div id="content">
<p>Second embellishment: C.S.Scholten pointed out to me, that the dischead monitor of C.A.R.Hoare, and therefore also the one on page EWD503 - 2 has on a macroscopic scale a danger of individual starvation. If <code>direction = up</code> and the train "upsweep" is not empty —more precisely: contains requests with <code>dest &gt; headpos</code>— a continuous stream of requests with <code>dest = headpos</code> can cause the requests in <code>upsweep</code> never to be honoured. The moral of the story is that requests with <code>dest = headpos</code> have to be placed in the other stream! The remedy seems to be, to replace line 9 by</p>
<blockquote>
<pre>
<code><u>if</u> dest &gt; headpos <u>or</u> dest = headpos <u>and</u> direction = down →</code>
</pre></blockquote>
and line 17 by
<blockquote>
<pre>
<code><font size="+3"><sub>▯</sub></font> dest &lt; headpos <u>or</u> dest = headpos <u>and</u> direction = up →</code>
</pre></blockquote>
<p>Wasn't that a nice pitfall? And then to think that there are still people that still refuse to believe that programming is difficult……</p>
<p class="center">*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br />
&nbsp;*</p>
<p>Remark about the devious influence of the programming language we are using:  if I had been trained to think in PL/I with its horrible "<code>BEGIN</code> statements", "<code>END</code> statements" and "<code>RETURN</code> statements" the invention as described in EWD501 in which the notion of "the dynamically last statement of a monitor procedure" plays a role, would probably not have been made! Again a frightening thought!</p>
<table width="90%" border="0" cellspacing="2" cellpadding="0">
<tr>
<td width="60%">Plataanstraat 5<br />
NL-4565 NUENEN<br />
The Netherlands</td>
<td>prof.dr.Edsger W.Dijkstra<br />
Burroughs Research Fellow</td>
</tr>
</table>
<hr />
<div id="footer"><font size="-1">transcribed by Edwin de Jong<br />
revised Tue, 7 Dec 2010</font></div>
</div>
</div>
</div>
  <script>
$('.body').tweetSelection({
  ellipsis: '...',
  quoteLeft: '\'',
  quoteRight: '\'',
  via: 'raboofje'
});
  </script>
  </body>
  </html>
