  <!DOCTYPE html>
  <html>
  <head>
    <title>An immediate sequel to EWD398: &ldquo;Sequencing primitives revisited</title>
    <link href="https://fonts.googleapis.com/css?family=Lobster|Raleway" rel="stylesheet">
    <link href="assets/common.css" rel="stylesheet">
    <link href="assets/transcriptions.css" rel="stylesheet">
    <link href="assets/tweet-selection.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.12.0.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/tweet-selection.js"></script>
    <meta name="generator" content="convertArticle.pl">
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@raboofje" />
    <meta name="twitter:description" content="From the Edsger Dijkstra EWD archive: An immediate sequel to EWD398: &ldquo;Sequencing primitives revisited" />
    <meta name="twitter:title" content="An immediate sequel to EWD398: &ldquo;Sequencing primitives revisited" />
    <meta name="twitter:image" content="http://raboof.github.io/ewd/assets/dijkstra.jpeg" />
  </head>
  <body>
  <div class="metabar">
    <div class="metabar-inner">
      <a href="index.html">HOME</a>
    </div>
  </div>
  <h1>An immediate sequel to EWD398: &ldquo;Sequencing primitives revisited</h1>
  <a class='original' href='https://www.cs.utexas.edu/~EWD/ewd39xx/EWD399.PDF'><img src='assets/original.png' alt='Show original manuscript'></a>
  <div class='body'>
<hr>
<p class="noindent">NOTE: This transcription was contributed by Martin P.M. van der Burgt, who has devised a process for producing transcripts automatically. Although its markup is incomplete, we believe it serves a useful purpose by virtue of its searchability and its accessibility to text-reading software. It will be replaced by a fully marked-up version when time permits. —HR</p>
<hr>
<p class="noindent"></p>
<p class="noindent"><b>An immediate sequel to EWD398: “Sequencing primitives revisited.”</b>.</p>
<p>I have fixed the semantic definition of the <b>if</b>...<b>fi</b> and of the <b>do</b>...<b>od</b> constructs as introduced in EWD398.</p>
<p>Let “Sif” be: <b>if</b> B1:S1 ▯ ... ▯ Bn:Sn <b>fi</b> ; then wp(Sif, P) = {(<u>E</u> i: 1≤i≤n: Bi) and (1≤i≤n:(Bi <b>and</b> wp(Si, P)) <b>or</b> <b>non</b> Bi)} .</p>
<p>Let “Sdo” be: <b>do</b> B1:S1 ▯ ... ▯ Bn:Sn <b>od</b> ; then wp(Sdo, P) = (E i: 0 ≤i: H<sub>i</sub>(Sdo, P)) , where the H<sub>i</sub>(Sdo, P) are given by the recurrence relation:</p>
<table width="100%">
<tr>
<td valign="top" width="10%"></td>
<td>H<sub>0</sub>(Sdo, P) = {P and non (E j: 1≤j≤n: Bi)}</td>
</tr>
<tr>
<td valign="top">for i &gt;0:</td>
<td>H<sub>i</sub>(Sdo, P) = {wp(Sif, H<sub>i-1</sub>(Sdo, P)) <b>or</b> H<sub>i-1</sub>(Sdo, P)}</td>
</tr>
</table>
Here the “wp(Sif, ...) is the function defined above. The interpretation of H<sub>i</sub>(Sdo, P) is ”the weakest precondition such that we can guarantee termination after at most i executions of a guarded command such that then the postcondition P will be satisfied. It is indeed the weakest precondition, if initially wp(Sdo, P) is not satisfied, either non-termination or termination without establishing the truth of P or both are possible. In terms of the H<sub>i</sub> an alternative definition of the weakest precondition for the <b>do</b>...<b>od</b> construct could have been —but I prefer to avoid the limit concept—
<table width="100%">
<tr>
<td width="7%">&nbsp;</td>
<td valign="top" width="15%">wp(Sdo, P) =</td>
<td>lim H<sub>i</sub>(Sdo, P)</td>
</tr>
<tr>
<td></td>
<td valign="top"></td>
<td>i → inf</td>
</tr>
</table>
so we had better forget this again.
<p>The decision to postulate —EWD398 - 4, last paragraph— “Fair random selection” so that the construct as described on top of page 5 and in the middle of page 8 is guaranteed to terminate, was a mistake: for such constructs we prefer now not to exclude non-termination. It is just too tricky if the termination —and in particular: the proof of the termination— has to rely on the fair randomness of the selection and we had better restrict ourselves to constructs were each guarded command, when executed, implies a further approaching of the terminal state.</p>
<table>
<tr>
<td>27th November 1973</td>
<td width="15%"></td>
<td>prof.dr.Edsger W.Dijkstra</td>
</tr>
<tr>
<td>Burroughs</td>
<td></td>
<td>Research Fellow</td>
</tr>
<tr>
<td>Plataanstraat 5</td>
</tr>
<tr>
<td>NUENEN - 4565, The Netherlands</td>
</tr>
</table>
<hr>
<p class="noindent"><font size="-1">Transcribed by Martin P.M. van der Burgt<br>
Last revision 2014-11-08 .</font></p>
<p>&nbsp;</p>
</div>
  <script>
$('.body').tweetSelection({
  ellipsis: '...',
  quoteLeft: '\'',
  quoteRight: '\'',
  via: 'raboofje'
});
  </script>
  </body>
  </html>
