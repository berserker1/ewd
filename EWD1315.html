  <!DOCTYPE html>
  <html>
  <head>
    <title>Indirect equality enriched (and a proof by Netty)</title>
    <link href="https://fonts.googleapis.com/css?family=Lobster|Raleway" rel="stylesheet">
    <link href="assets/common.css" rel="stylesheet">
    <link href="assets/transcriptions.css" rel="stylesheet">
    <link href="assets/tweet-selection.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.12.0.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/tweet-selection.js"></script>
    <meta name="generator" content="convertArticle.pl">
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@raboofje" />
    <meta name="twitter:description" content="From the Edsger Dijkstra EWD archive: Indirect equality enriched (and a proof by Netty)" />
    <meta name="twitter:title" content="Indirect equality enriched (and a proof by Netty)" />
    <meta name="twitter:image" content="http://raboof.github.io/ewd/assets/dijkstra.jpeg" />
  </head>
  <body>
  <div class="metabar">
    <div class="metabar-inner">
      <a href="index.html">HOME</a>
    </div>
  </div>
  <h1>Indirect equality enriched (and a proof by Netty)</h1>
  <div class='body'>
<p>Proofs known as "proofs by indirect equality" traditionally exploit</p>
<p class="noindent">(0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <var>x</var> = <var>y&nbsp;&nbsp;&nbsp;&nbsp;</var> ≡ &nbsp;&nbsp;〈∀<var>u</var> : true : <var>u</var>⊑<var>x&nbsp;</var>≡&nbsp;<var>u</var>⊑<var>y</var> 〉</p>
<p class="noindent">for some reflexive, antisymmetric ⊑ : they establish equality by establishing the right-hand side of (0). The following lemma shows that we may be able to get away with a proof obligation that is formally weaker.</p>
<p class="noindent"><u>Lemma</u> For reflexive, antisymmetric &amp;#x2291 and predicate <var>P</var> such that <var>P</var>.<var>x</var> ∧ <var>P</var>.<var>y</var> , we have</p>
<p class="noindent">(1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<var>x</var> = <var>y&nbsp;&nbsp;&nbsp;&nbsp;</var> ≡ &nbsp;&nbsp;〈∀<var>u</var> : <var>P</var>.<var>u</var> : <var>u</var>⊑<var>x&nbsp;</var> ≡&nbsp; <var>u</var>⊑<var>y</var> 〉</p>
<p class="noindent"><u>Proof</u></p>
<p class="noindent"><u>LHS ⇒ RHS</u>&nbsp;&nbsp;&nbsp;This follows from Leibniz's Principle.</p>
<p class="noindent"><u>RHS ⇐ LHS</u>&nbsp;&nbsp;&nbsp;We observe for any <var>x</var>,<var>y</var>, <var>P</var> such that <var>P</var>.<var>x</var> ∧ <var>P</var>.<var>y</var></p>
<p>〈∀<var>u</var> : <var>P</var>.<var>u</var> : <var>u</var>⊑<var>x&nbsp;</var>≡&nbsp;<var>u</var>⊑<var>y</var> 〉</p>
<p class="p1">⇒&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { instantiate <var>u</var>:= <var>x</var> and <var>u</var>:= <var>y</var> }</p>
<p class="p0">(<var>P</var>.<var>x</var> ⇒ (<var>x</var>⊑<var>x</var> ≡ <var>x</var>⊑<var>y</var> )) ∧ (<var>P</var>.<var>y</var> ⇒ (<var>y</var>⊑<var>x</var> ≡ <var>y</var>⊑<var>y</var> ))</p>
<p class="p1">≡&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <var>P</var>.<var>x</var> ∧ <var>P</var>.<var>y</var> }</p>
<p class="p0">(<var>x</var>⊑<var>x</var> ≡ <var>x</var>⊑<var>y</var> ) ∧ (<var>y</var>⊑<var>x</var> ≡ <var>y</var>⊑<var>y</var> )</p>
<p class="p1">≡&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { ⊑ is reflexive }</p>
<p class="p0"><var>x</var>⊑<var>y</var> ∧ <var>y</var>⊑<var>x</var></p>
<p class="p1">⇒&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { ⊑ is antisymmetric }</p>
<p class="p0"><var>x</var> = <var>y</var> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(End of Proof)</p>
<p class="p0"></p>
<div id="content" align="center">
<p class="noindent">*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
*</p>
</div>
<div id="content"><u>An application</u>
<p>Let the above &amp;#x2291 be the partial order of a lattice for which the infimum ↓ is defined by the usual</p>
<p class="noindent">(2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<var>u</var>&nbsp;⊑&nbsp;<var>x</var>↓<var>y</var> &nbsp;&nbsp;&nbsp;≡&nbsp;&nbsp;&nbsp; <var>u</var>⊑<var>x</var>&nbsp;&nbsp;∧&nbsp; <var>u</var>⊑<var>y</var></p>
<p class="noindent">Fairly directly follow the general lattice properties</p>
<p class="noindent">(3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;↓ is idempotent, symmetric, associative</p>
<p class="noindent">(4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<var>x</var>↓<var>y</var> ⊑ <var>x</var> and <var>x</var>↓<var>y</var> ⊑ <var>y</var></p>
<p class="noindent">(5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<var>x</var>⊑<var>y</var> &nbsp; ≡ &nbsp; <var>x</var> = <var>x</var>↓<var>y</var></p>
<p>We now specialize by making the variables <var>x</var>, <var>y</var>, <var>u</var> etc. of type natural and identifying &amp;#x2291 with "divides" —or "is a divisor of"—, which is a partial order on the naturals for which the infimum exists: <var>x</var> ↓ <var>y</var> is in fact the Greatest Common Divisor of <var>x</var> and <var>y</var> .</p>
<p>The formal link between our lattice and arithmetic on the naturals &amp;#x2014multiplication in particular— is given by providing 〈∃<var>q</var> :: <var>q</var>*<var>x</var> = <var>y</var> 〉 as a third expression for "<var>x</var> divides <var>y&nbsp;</var>", i.e. we add to our laws</p>
<p class="noindent">(6)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;〈∃<var>q</var> :: <var>q</var>*<var>x</var> = <var>y</var> 〉&nbsp;&nbsp; ≡&nbsp;&nbsp; <var>x</var>⊑<var>y</var></p>
<p class="noindent">from which the mutually equivalent</p>
<p class="noindent">(7)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<var>m</var> ⊑ <var>m</var>*<var>x</var> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <var>m</var> &nbsp;=&nbsp; <var>m</var>&nbsp;↓ <var>m</var>*<var>x</var></p>
<p class="noindent">immediately follow. (Please note that we have given * a stronger binding power than &amp;#x2193.)</p>
<p>We are now ready to prove that the GCD of two <var>m</var>-tiples<sup>‡</sup> is an <var>m</var>-tiple<sup>‡</sup>, in formula</p>
<p class="noindent">(8)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<var>m</var> &nbsp;⊑ &nbsp;<var>m</var>*<var>x</var> ↓ <var>m</var>*<var>y</var></p>
<p class="noindent"><u>Proof</u> &nbsp;&nbsp;&nbsp;We observe</p>
<p class="p0"><var>m&nbsp;&nbsp;</var> ⊑&nbsp;&nbsp; <var>m</var>*<var>x</var> ↓ <var>m</var>*<var>y</var></p>
<p class="p1">≡&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { (5) and associativity of ↓ (3) }</p>
<p class="p0"><var>m</var> &nbsp;&nbsp;=&nbsp;&nbsp; <var>m&nbsp;</var>↓ <var>m</var>*<var>x</var> ↓ <var>m</var>*<var>y</var></p>
<p class="p1">≡ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ (7) }</p>
<p class="p0"><var>m</var> &nbsp;=&nbsp; <var>m</var> ↓&nbsp;<var>m</var>*<var>y</var></p>
<p class="p1">≡ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ (7) with <var>x</var>:= <var>y</var> }</p>
<p class="p0">true</p>
</div>
<div id="frame" align="right">
<div id="content" align="right">
<p class="continue">(End of Proof)</p>
<p class="continue"></p>
</div>
</div>
<div id="frame">
<div id="content">
<hr size="1" width="150em" align="left">
<sup>‡</sup> An "<var>m</var>-tiple" is a multiple of <var>m</var>.
<hr size="1" width="150em" align="left">
<p>And now we are ready for an application of the Lemma with which this note started: we shall show that multiplication distributes over the GCD, in formula</p>
<p class="noindent">(9)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<var>m</var> * (<var>x</var>↓<var>y</var> ) &nbsp;&nbsp;=&nbsp;&nbsp; <var>m</var>*<var>x</var>&nbsp;↓&nbsp;<var>m</var>*<var>y</var></p>
<p class="noindent"><u>Proof</u></p>
<p>On account of (7), the LHS of (9) is an <var>m</var>-tiple, on account of (8), the RHS is an <var>m</var>-tiple. Lemma (1) can thus be applied with <var>m</var> ⊑ <var>u</var> for <var>P</var>.<var>u</var> . Accordingly we observe for 1 ≤ <var>m</var> —the case of <var>m</var> = 0 is obvious—</p>
<p>(9)</p>
<p class="p1">≡ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ (1) }</p>
<p class="p0">〈∀<var>u</var> : <var>m</var>⊑<var>u</var> : &nbsp;<var>u</var> ⊑ <var>m</var>*(<var>x</var>↓<var>y</var> ) &nbsp;≡&nbsp; <var>u</var> ⊑ <var>m</var>*<var>x</var> ↓ <var>m</var>*<var>y</var> 〉</p>
<p class="p1">≡ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ transforming the dummy: <var>u</var> = <var>m</var>*<var>w</var> }</p>
<p class="p0">〈∀<var>w</var> :: <var>m</var>*<var>w&nbsp;</var> ⊑&nbsp; <var>m</var>*(<var>x</var>↓<var>y</var> ) &nbsp;&nbsp;≡ &nbsp;&nbsp;<var>m</var>*<var>w&nbsp;</var> ⊑ &nbsp;<var>m</var>*<var>x</var> ↓ <var>m</var>*<var>y</var> 〉</p>
<p class="p1">≡ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ (2) }</p>
<p class="p0">〈∀<var>w</var> :: <var>m</var>*<var>w</var> ⊑ <var>m</var>*(<var>x</var>↓<var>y</var> )&nbsp;&nbsp; ≡&nbsp;&nbsp; <var>m</var>*<var>w</var> ⊑ <var>m</var>*<var>x&nbsp;</var> ∧&nbsp; <var>m</var>*<var>w</var> ⊑ <var>m</var>*<var>y</var> 〉</p>
<p class="p1">≡ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <var>r</var> ⊑<var>s&nbsp;&nbsp;</var> ≡&nbsp;&nbsp; <var>m</var>*<var>r</var> &nbsp;⊑ &nbsp;<var>m</var>*<var>s</var> for 1≤<var>m</var> }</p>
<p class="p0">〈∀<var>w</var> :: <var>w</var> ⊑ <var>x</var>↓<var>y&nbsp;&nbsp;</var> ≡&nbsp;&nbsp; <var>w</var>⊑<var>x</var> ∧ <var>w</var>⊑<var>y</var> 〉</p>
<p class="p1">≡ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ (2) }</p>
<p class="p0">true</p>
</div>
<div id="content" align="right">
<p class="continue">(End of Proof)</p>
</div>
<div id="content">
<p class="noindent"><u>Addendum</u></p>
<p>For those who are not comfortable with the dummy transformation, here is its pattern in a bit more detail</p>
<p>〈∀<var>u</var> : <var>m</var>⊑<var>u</var> : <var>Q</var>.<var>u</var> 〉</p>
<p class="p1">≡ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ for non-empty range &amp;#x3008∀<var>w</var> :: <var>C</var> 〉≡ <var>C</var> }</p>
<p class="p0">〈∀<var>u</var> : <var>m</var>⊑<var>u</var> : 〈∀<var>w</var> : <var>u</var> = <var>m</var>*<var>w</var> : <var>Q</var>.<var>u</var> 〉〉</p>
<p class="p1">≡ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ interchange of quantifications }</p>
<p class="p0">〈∀<var>w</var> :: 〈∀<var>u</var> : <var>u</var> = <var>m*</var><var>w</var> &nbsp;∧&nbsp;&nbsp;<var>m</var>⊑<var>u</var> : <var>Q</var>.<var>u</var> 〉〉</p>
<p class="p1">≡ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <var>u</var> = <var>m</var>*<var>w&nbsp;</var> ⇒&nbsp; <var>m</var>⊑<var>u</var> }</p>
<p class="p0">〈∀<var>w</var> :: 〈∀<var>u</var> : <var>u</var> = <var>m</var>*<var>w</var> : <var>Q</var>.<var>u</var> 〉〉</p>
<p class="p1">≡ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ one-point rule }</p>
<p class="p0">〈∀<var>w</var> :: <var>Q</var>.(<var>m</var>*<var>w</var> ) 〉</p>
</div>
<div id="content" align="right">
<p class="continue">(End of Addendum)&nbsp;&nbsp;&nbsp;</p>
</div>
</div>
<div id="frame" align="center">
<div id="frame" align="center">
<div id="content" align="center">
<p class="noindent">*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
*</p>
</div>
</div>
</div>
<div id="frame">
<p>All of the above was triggered by Netty van Gasteren's use of (9) in her ingenious proof of</p>
<p class="noindent">(10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<var>x</var>↓<var>y</var> = 1 &nbsp;⇒&nbsp; <var>x</var> ↓ <var>y</var>*<var>z</var> = <var>x</var>↓<var>z</var> &nbsp;&nbsp;&nbsp;:<br></p>
<p><var>x</var>↓<var>z</var></p>
<p class="p1">= &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ antecedent of (10) }</p>
<p class="p0"><var>x</var> ↓ (<var>x</var>↓<var>y</var> )*<var>z</var></p>
<p class="p1">= &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ (9) and associativity of ↓ }</p>
<p class="p0"><var>x</var> ↓ <var>x</var>*<var>z</var> ↓ <var>y</var>*<var>z</var></p>
<p class="p1">= &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ (7) with <var>m</var>,<var>x</var> := <var>x</var>,<var>z</var> }</p>
<p class="p0"><var>x</var> ↓ <var>y</var>*<var>z</var></p>
<p class="rightalign">Nuenen, 14 December 2001&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p class="noindent">prof. dr Edsger W. Dijkstra<br>
Department of Computer Sciences<br>
The University of Texas at Austin<br>
Austin, TX 78712-1188<br>
USA</p>
<hr>
<!-- name and date -->
<div id="footer">
<p class="colofon">transcribed by David Naumann and Carl Ludwigson<br>
revised Mon, 3 Dec 2007</p>
</div>
</div>
</div>
  <script>
$('.body').tweetSelection({
  ellipsis: '...',
  quoteLeft: '\'',
  quoteRight: '\'',
  via: 'raboofje'
});
  </script>
  </body>
  </html>
